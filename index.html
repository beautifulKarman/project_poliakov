<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
<<<<<<< Updated upstream
  <title>Моє Портфоліо</title>
  <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';">
=======
  <title>Matrix Chat</title>

  <!-- CSP: дозволяємо CDN-скрипти і запити до matrix.org -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' data:;
                 script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.tailwindcss.com https://unpkg.com;
                 style-src 'self' 'unsafe-inline';
                 img-src 'self' data:;
                 connect-src 'self' https://matrix.org;">

  <!-- TailwindCSS & Alpine.js -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/alpinejs" defer></script>
>>>>>>> Stashed changes

  <!-- Стилі каркасу й портфоліо -->
  <style>
<<<<<<< Updated upstream
    /* Основні стилі сторінки */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f0f2f5;
    }

    .container {
      width: 90%;
      max-width: 900px;
      margin: 20px auto;
      padding: 20px;
      background-color: #ffffff;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }

    h1, h2 {
      color: #333;
      border-bottom: 2px solid #007bff;
      padding-bottom: 5px;
    }

    ul {
      list-style-type: square;
      margin-left: 20px;
    }

    /* Додаткові стилі для таблиці */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: left;
    }

    th {
      background-color: #f2f2f2;
      color: #555;
    }

    tr:nth-child(even) {
      background-color: #f9f9f9;
    }

    tr:hover {
      background-color: #eef6ff;
    }
=======
    .chat-container { min-height: 80vh; }
    .sidebar { min-width: 250px; }
    .chat-area { flex-grow: 1; }
    .message-input { min-height: 80px; }
    .room-list li { padding: 8px; transition: background-color 0.2s; }
    .room-list li:hover { background-color: #e0e7ff; }
    .room-list li.active { background-color: #bfdbfe; font-weight: 500; }

    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f0f2f5; }
    .container {
      width: 90%; max-width: 900px; margin: 20px auto; padding: 20px;
      background: #fff; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,.05);
    }
    h1, h2 { color:#333; border-bottom: 2px solid #007bff; padding-bottom: 5px; }
    ul { list-style-type: square; margin-left: 20px; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
    th { background:#f2f2f2; color:#555; }
    tr:nth-child(even){ background:#f9f9f9; }
    tr:hover{ background:#eef6ff; }

    [x-cloak]{ display:none !important; }
>>>>>>> Stashed changes
  </style>

  <!-- Логіка компонентів -->
  <script src="./login.js"></script>
  <script src="./sidebar.js"></script>
</head>
<body>
  <div class="container">
    <h1>Моє портфоліо</h1>
    <p>Вітаю! Це мій перший практичний проєкт в Electron.</p>

<<<<<<< Updated upstream
    <h2>Мої навички</h2>
    <ul>
      <li>HTML5 — Основи</li>
      <li>CSS — Базові стилі</li>
      <li>JavaScript — Початківець</li>
      <li>Electron — Встановлення та запуск</li>
    </ul>

    <h2>Мої проєкти</h2>
    <table>
      <thead>
        <tr>
          <th>Назва проєкту</th>
          <th>Технологія</th>
          <th>Статус</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Перший додаток</td>
          <td>Electron.js</td>
          <td>В процесі</td>
        </tr>
        <tr>
          <td>Портфоліо</td>
          <td>HTML/CSS</td>
          <td>Готово</td>
        </tr>
      </tbody>
    </table>
  </div>
=======
<body class="bg-gray-100 flex items-center justify-center p-4">
  <div x-data="chatApp()" class="chat-container bg-white rounded-lg shadow-lg flex w-full max-w-5xl">

    <!-- Сайдбар кімнат -->
    <div id="sidebar-container" class="sidebar"></div>

    <!-- Основна область -->
    <div class="chat-area p-4 flex flex-col w-full">
      <!-- Контейнер логіну -->
      <div id="login-container"></div>

      <!-- Після авторизації: Matrix ID, резюме, портфоліо -->
      <template x-if="accessToken">
        <div>
          <h1 class="text-lg font-semibold mb-3">Ви успішно авторизувались. Ваша панель керування</h1>

          <div class="flex flex-col h-[550px]">
            <!-- User ID -->
            <div class="mb-2 p-2 bg-gray-200 rounded text-sm break-words">
              <span class="font-bold">Your Matrix ID:</span>
              <span x-text="userId ? userId : 'Loading...'"></span>
            </div>

            <!-- Резюме -->
            <div class="mb-3 p-3 border rounded">
              <h2 class="text-base font-semibold mb-2">Резюме</h2>
              <div class="grid grid-cols-1 gap-2 text-sm">
                <div><span class="font-semibold">Ім’я:</span> Дмитро (приклад)</div>
                <div><span class="font-semibold">Роль:</span> Junior Frontend / Electron</div>
                <div><span class="font-semibold">Email:</span> your.email@example.com</div>
                <div><span class="font-semibold">Навички:</span> HTML5, CSS, Tailwind, Alpine.js, Electron, Python (Pandas)</div>
              </div>
            </div>

            <!-- Портфоліо -->
            <div class="container overflow-auto">
              <h1>Моє портфоліо</h1>
              <p>Вітаю! Це мій перший практичний проєкт в Electron.</p>

              <h2>Мої навички</h2>
              <ul>
                <li>HTML5 — Основи</li>
                <li>CSS — Базові стилі</li>
                <li>JavaScript — Початківець</li>
                <li>Electron — Встановлення та запуск</li>
              </ul>

              <h2>Мої проєкти</h2>
              <table>
                <thead>
                  <tr>
                    <th>Назва проєкту</th>
                    <th>Технологія</th>
                    <th>Статус</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Перший додаток</td>
                    <td>Electron.js</td>
                    <td>В процесі</td>
                  </tr>
                  <tr>
                    <td>Портфоліо</td>
                    <td>HTML/CSS</td>
                    <td>Готово</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div><!-- /flex -->
        </div>
      </template>
    </div>
  </div>

  <!-- Надійне підвантаження HTML-компонентів (fs -> fetch) -->
  <script>
    function mountHtml(targetId, fileName) {
      const slot = document.getElementById(targetId);
      if (!slot) return;

      // 1) Перший варіант: читаємо з диска (Electron renderer з nodeIntegration)
      try {
        const fs = require('fs');
        const path = require('path');
        const html = fs.readFileSync(path.join(__dirname, fileName), 'utf-8');
        slot.innerHTML = html;
        return;
      } catch (e) {
        console.warn('fs read failed for', fileName, e);
      }

      // 2) Fallback через fetch
      fetch('./' + fileName)
        .then(r => r.text())
        .then(html => slot.innerHTML = html)
        .catch(err => {
          console.error('Error loading', fileName, err);
          slot.innerHTML = `<div class="text-red-600 p-3">Не вдалося завантажити ${fileName}</div>`;
        });
    }

    window.addEventListener('DOMContentLoaded', () => {
      mountHtml('login-container', 'login.html');
      mountHtml('sidebar-container', 'sidebar.html');
    });

    /* ГОЛОВНИЙ СТАН */
    function chatApp() {
      return {
        // auth
        username: '',
        password: '',
        accessToken: '',
        userId: '',

        // rooms/messages
        roomId: '',
        joinRoomId: '',
        newRoomName: '',
        newRoomId: '',
        rooms: [],
        messages: [],
        newMessage: '',
        inviteUser: '',
        lastSyncToken: '',

        // misc
        error: '',

        // методи з компонентів
        login,                // from login.js
        createRoom,           // from sidebar.js
        fetchRoomsWithNames,  // from sidebar.js

        // допоміжні
        switchRoom(id) {
          if (!id) return;
          this.roomId = id;
          this.messages = [];
          this.lastSyncToken = '';
          this.fetchMessages();
        },

        async fetchMessages() { /* TODO: реалізуєш далі для області чату */ },

        getRoomName(roomId) {
          if (!roomId) return '';
          const idx = roomId.indexOf(':');
          return idx > -1 ? roomId.slice(0, idx) : roomId;
        },

        localizeError(msg) {
          const m = ('' + msg).toUpperCase();
          if (m.includes('FORBIDDEN') || m.includes('M_FORBIDDEN')) return 'Невірний логін або пароль.';
          if (m.includes('UNAUTHORIZED') || m.includes('M_UNAUTHORIZED')) return 'Авторизація відхилена.';
          if (m.includes('BAD JSON') || m.includes('M_BAD_JSON')) return 'Невірний формат запиту.';
          if (m.includes('CAPTCHA')) return 'Потрібна CAPTCHA. Завершіть в офіційному клієнті.';
          if (m.includes('RATE LIMIT') || m.includes('M_LIMIT_EXCEEDED')) return 'Забагато спроб. Зачекайте та повторіть.';
          return 'Не вдалося увійти. Перевірте дані та спробуйте знову.';
        }
      }
    }
  </script>
>>>>>>> Stashed changes
</body>
</html>
